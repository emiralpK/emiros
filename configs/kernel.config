# Linux Kernel Configuration for Raspberry Pi 5 - EmiROS
# Minimal configuration with X11/XFCE support

CONFIG_ARM64=y
CONFIG_ARCH_BCM2835=y

# Enable Raspberry Pi 5 specific features
CONFIG_ARCH_BCM2712=y

# CPU Features
CONFIG_ARM64_VA_BITS_48=y
CONFIG_SCHED_MC=y
CONFIG_NR_CPUS=4

# General setup
CONFIG_LOCALVERSION="-emiros-rpi5"
CONFIG_DEFAULT_HOSTNAME="emiros"
CONFIG_SYSVIPC=y
CONFIG_POSIX_MQUEUE=y
CONFIG_NO_HZ=y
CONFIG_HIGH_RES_TIMERS=y
CONFIG_PREEMPT=y
CONFIG_IKCONFIG=y
CONFIG_IKCONFIG_PROC=y
CONFIG_LOG_BUF_SHIFT=18
CONFIG_BLK_DEV_INITRD=y
CONFIG_EMBEDDED=n

# Kernel features
CONFIG_COMPAT=y

# Modules
CONFIG_MODULES=y
CONFIG_MODULE_UNLOAD=y

# Networking
CONFIG_NET=y
CONFIG_PACKET=y
CONFIG_UNIX=y
CONFIG_INET=y
CONFIG_IP_PNP=y
CONFIG_IP_PNP_DHCP=y

# Device Drivers

# Block devices
CONFIG_BLK_DEV_SD=y
CONFIG_BLK_DEV_LOOP=y

# SCSI
CONFIG_SCSI=y

# USB Support
CONFIG_USB=y
CONFIG_USB_EHCI_HCD=y
CONFIG_USB_DWCOTG=y
CONFIG_USB_STORAGE=y

# MMC/SD
CONFIG_MMC=y
CONFIG_MMC_SDHCI=y
CONFIG_MMC_SDHCI_PLTFM=y
CONFIG_MMC_SDHCI_IPROC=y
CONFIG_MMC_BCM2835=y

# Network device support
CONFIG_NETDEVICES=y
CONFIG_ETHERNET=y
CONFIG_NET_VENDOR_BROADCOM=y
CONFIG_GENET=y

# Input device support
CONFIG_INPUT=y
CONFIG_INPUT_KEYBOARD=y
CONFIG_INPUT_MOUSE=y
CONFIG_INPUT_EVDEV=y

# Graphics support (for X11)
CONFIG_FB=y
CONFIG_FRAMEBUFFER_CONSOLE=y
CONFIG_DRM=y
CONFIG_DRM_FBDEV_EMULATION=y
CONFIG_DRM_V3D=y
CONFIG_DRM_VC4=y
CONFIG_DRM_VC4_HDMI_CEC=y

# GPU support
CONFIG_BCM_VIDEOCORE=y

# I2C
CONFIG_I2C=y
CONFIG_I2C_BCM2835=y

# SPI
CONFIG_SPI=y
CONFIG_SPI_BCM2835=y

# GPIO
CONFIG_GPIOLIB=y
CONFIG_GPIO_SYSFS=y

# Serial console
CONFIG_SERIAL_8250=y
CONFIG_SERIAL_8250_CONSOLE=y
CONFIG_SERIAL_AMBA_PL011=y
CONFIG_SERIAL_AMBA_PL011_CONSOLE=y

# Real Time Clock
CONFIG_RTC_CLASS=y
CONFIG_RTC_DRV_PL031=y

# File systems
CONFIG_EXT4_FS=y
CONFIG_VFAT_FS=y
CONFIG_TMPFS=y
CONFIG_TMPFS_POSIX_ACL=y
CONFIG_CONFIGFS_FS=y

# Pseudo filesystems
CONFIG_PROC_FS=y
CONFIG_SYSFS=y
CONFIG_DEVTMPFS=y
CONFIG_DEVTMPFS_MOUNT=y

# Misc
CONFIG_MAGIC_SYSRQ=y
